{"componentChunkName":"component---src-templates-blog-post-js","path":"/laravel-login-on-tinker/","result":{"data":{"site":{"siteMetadata":{"title":"ソタのほほん地下貯蔵庫"}},"markdownRemark":{"id":"5cd28423-aab4-5f65-aaad-c310e5edd22c","excerpt":"これなに Laravel開発していると、たまーにtinkerで動作確認した方が早い時があるのですが、AuthファサードからUserモデルを呼びたくなった時にちょっと困ったので備忘録です。 結論 上記のメソッドで、tinker上のプロセスをログイン状態にできます。Nはログインしたいユーザのid…","html":"<h2>これなに</h2>\n<p>Laravel開発していると、たまーにtinkerで動作確認した方が早い時があるのですが、AuthファサードからUserモデルを呼びたくなった時にちょっと困ったので備忘録です。</p>\n<h2>結論</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token class-name static-context\">Auth</span><span class=\"token operator\">::</span><span class=\"token function\">loginUsingId</span><span class=\"token punctuation\">(</span><span class=\"token constant\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>上記のメソッドで、tinker上のプロセスをログイン状態にできます。Nはログインしたいユーザのidを入れます。</p>\n<h2>本当にログインできているか色々確認</h2>\n<h3>前提</h3>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>Usersテーブル</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> id,name,email from <span class=\"token function\">users</span><span class=\"token punctuation\">;</span>\n+----+------+-----------------+\n<span class=\"token operator\">|</span> <span class=\"token function\">id</span> <span class=\"token operator\">|</span> name <span class=\"token operator\">|</span> email           <span class=\"token operator\">|</span>\n+----+------+-----------------+\n<span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span> 鰻   <span class=\"token operator\">|</span> unagit@fish.com <span class=\"token operator\">|</span>\n+----+------+-----------------+\n<span class=\"token number\">1</span> row <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>Postsテーブル</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> id,user_id,content from posts<span class=\"token punctuation\">;</span>\n+----+---------+-----------------+\n<span class=\"token operator\">|</span> <span class=\"token function\">id</span> <span class=\"token operator\">|</span> user_id <span class=\"token operator\">|</span> content         <span class=\"token operator\">|</span>\n+----+---------+-----------------+\n<span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span> ひつまぶし      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span> 鰻重            <span class=\"token operator\">|</span>\n+----+---------+-----------------+\n<span class=\"token number\">2</span> rows <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>テキトーに作ったテーブル達です。Authファサードの動作確認がてらtinker上で遊んでみる</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token class-name static-context\">Auth</span><span class=\"token operator\">::</span><span class=\"token function\">loginUsingId</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span>warning<span class=\"token operator\">></span><span class=\"token constant\">PHP</span> <span class=\"token argument-name\">Warning</span><span class=\"token punctuation\">:</span>  <span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span><span class=\"token operator\">/</span>work<span class=\"token operator\">/</span>backend<span class=\"token operator\">/</span>storage<span class=\"token operator\">/</span>framework<span class=\"token operator\">/</span>sessions<span class=\"token operator\">/</span>TyjRN0eOxABzlgCLj6ySoiYmzTEwxIZ3WuzTdMLd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token class-name return-type\">No</span> such file <span class=\"token keyword\">or</span> directory in <span class=\"token operator\">/</span>work<span class=\"token operator\">/</span>backend<span class=\"token operator\">/</span>vendor<span class=\"token operator\">/</span>laravel<span class=\"token operator\">/</span>framework<span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>Illuminate<span class=\"token operator\">/</span>Filesystem<span class=\"token operator\">/</span>Filesystem<span class=\"token operator\">.</span>php on line <span class=\"token number\">285</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>warning<span class=\"token operator\">></span>\n<span class=\"token operator\">=></span> App\\Models\\User <span class=\"token punctuation\">{</span><span class=\"token comment\">#4287</span>\n     <span class=\"token argument-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n     <span class=\"token argument-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"鰻\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token argument-name\">email</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"unagit@fish.com\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token argument-name\">email_verified_at</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">,</span>\n     <span class=\"token comment\">#password: \"$2y$10$JQAjsapiPwD5WiHfVdjhp.ns/5cAA7it5idcyMO8eMQDbEhB0kREm\",</span>\n     <span class=\"token comment\">#remember_token: null,</span>\n     <span class=\"token argument-name\">created_at</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"2021-09-09 12:30:06\"</span><span class=\"token punctuation\">,</span>\n     <span class=\"token argument-name\">updated_at</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"2021-09-09 12:30:06\"</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token class-name static-context\">Auth</span><span class=\"token operator\">::</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">=></span> <span class=\"token number\">1</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token class-name static-context\">Auth</span><span class=\"token operator\">::</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"鰻\"</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token class-name static-context\">Auth</span><span class=\"token operator\">::</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token property\">email</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">=></span> <span class=\"token string double-quoted-string\">\"unagit@fish.com\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>warning出ていますが、問題なく鰻の情報が取れていますね！</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token class-name static-context\">Auth</span><span class=\"token operator\">::</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">posts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">=></span> Illuminate\\Database\\Eloquent\\Collection <span class=\"token punctuation\">{</span><span class=\"token comment\">#4500</span>\n     <span class=\"token argument-name\">all</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n       App\\Models\\Post <span class=\"token punctuation\">{</span><span class=\"token comment\">#4497</span>\n         <span class=\"token argument-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">user_id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"ひつまぶし\"</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">created_at</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"2021-09-09 12:38:58\"</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">updated_at</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"2021-09-09 12:38:58\"</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n       App\\Models\\Post <span class=\"token punctuation\">{</span><span class=\"token comment\">#4288</span>\n         <span class=\"token argument-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">user_id</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"鰻重\"</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">created_at</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"2021-09-09 12:39:09\"</span><span class=\"token punctuation\">,</span>\n         <span class=\"token argument-name\">updated_at</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"2021-09-09 12:39:09\"</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n     <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>もちろんUserモデルに設定していた <code class=\"language-text\">hasMany</code> のようなリレーションも利用できます。</p>\n<h2>おしまい</h2>\n<p>ちゃんちゃん</p>","frontmatter":{"title":"【Laravel】tinker上でログイン状態にしてAuthファサードからUserモデルを取得したい","date":"September 10, 2021","description":"tinker上でログイン状態にしてAuthファサードからUserモデルを取得したい","hero":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACJklEQVQoz42TT08TYRDG9+7Zb2NMvJh4VeMH8OBNvRg9cjMeMPFgQoQYjRiDGglRASWoKRRIqVIqtNvubtndlpZNgVJ22223/35m3gYuJsphMu+8O/PMM8+8q+VXMwSZGpHdpu1EtO02kRP90ySnW+zSK/X+ytdGbt9kc+oTgz1o7YQq4X/WK/bw0hXshEW32KO10zoF1jbmFykuJemWBnSciI7boeN0lBcGwkSZO/RS1N/t4/32sNcdqKDupUZANd8Mya1YNMwA3/A5zh/TMBsERoC5YrK3ucdh5pBatkZ1q0o9V6dhNVR8pB9hJ2zcpKtqhITmpXaZez3L1vct0otp1ufWScwlVLz2eQ1jxaCSqmCtWixMLRCfiVNYK5D+lia/nCe3lCM5n8SIGwzKAzRPD6npddXxIHPA/vY+TatJs9BUXu4FsJgsEhZCNYWM7ed9dZbxJZZvSsPZyVekvv4kt5xn+8e26qjHdMobZcxVk5kXM0w+nWR0ZJRsLKskkDGFuTCTcYUE5cFQw9jbZ1Q2XQIzUIxUd8NXZ9FFkkVPL+0pLU/0k3ylp+ETWk1KG95Qw+t3HzL2PAa70HbkWQw3LcCyOXkiEvdL/dNtnmw+sAJSxgG/9DK3rl1heuI92oUb97jz+CqOEafvQss+21sU4Fq+TtyoknarfHg5wcd3S2jnL1/iwfQ5svoUKMDmmf6UyI5ouCGFgsujJ+NcvP+GsfEv/AE5OxgTvuscZwAAAABJRU5ErkJggg==","aspectRatio":1.9047619047619047,"src":"/static/5d9ddb888e14a4442238666b72e692ef/f3583/thumbnail.png","srcSet":"/static/5d9ddb888e14a4442238666b72e692ef/dd5bb/thumbnail.png 320w,\n/static/5d9ddb888e14a4442238666b72e692ef/f3dec/thumbnail.png 640w,\n/static/5d9ddb888e14a4442238666b72e692ef/f3583/thumbnail.png 1200w","sizes":"(max-width: 1200px) 100vw, 1200px"}},"publicURL":"/static/5d9ddb888e14a4442238666b72e692ef/thumbnail.png"},"tags":["Tech","備忘録","PHP","Laravel"]}}},"pageContext":{"slug":"/laravel-login-on-tinker/","previous":{"fields":{"slug":"/shimane-susanoo-magic-21-22-prospect/"},"frontmatter":{"title":"島根スサノオマジック21-22シーズン展望と注目チーム"}},"next":{"fields":{"slug":"/php-date-time-diff-d-days/"},"frontmatter":{"title":"【PHP】DateTime::diff()で日数差を取得するにはdaysプロパティを使う（dはダメ）"}}}},"staticQueryHashes":["1324386404"]}