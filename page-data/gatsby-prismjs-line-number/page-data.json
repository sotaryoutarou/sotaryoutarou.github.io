{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-prismjs-line-number/","result":{"data":{"site":{"siteMetadata":{"title":"ソタのほほん地下貯蔵庫"}},"markdownRemark":{"id":"554b487e-7689-58d5-80d0-06ccb11da1fd","excerpt":"これなに コードブロックのテーマを付与しただけでは物足りなかったので行番号も付与してみます。 前提 GatsbyのテーマはStarter Blogを利用しています。 行番号付与 行番号も付与します。  のオプションを設定していきます。 Before After 次にCSS…","html":"<h2>これなに</h2>\n<p>コードブロックのテーマを付与しただけでは物足りなかったので行番号も付与してみます。</p>\n<h3>前提</h3>\n<p>Gatsbyのテーマは<a href=\"https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog\">Starter Blog</a>を利用しています。</p>\n<h2>行番号付与</h2>\n<p>行番号も付与します。 <code class=\"language-text\">gatsby-remark-prismjs</code> のオプションを設定していきます。</p>\n<p>Before</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-config.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token comment\">/* ~略~ */</span>\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>After</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-config.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token comment\">/* ~略~ */</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              classPrefix<span class=\"token operator\">:</span> <span class=\"token string\">\"language-\"</span><span class=\"token punctuation\">,</span>\n              inlineCodeMarker<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n              aliases<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n              showLineNumbers<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n              noInlineHighlight<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>次にCSSを読み込みます。</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-browser.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"prismjs/plugins/line-numbers/prism-line-numbers.css\"</span> </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>ここで問題なのが、行番号の表示がずれてしまっています。こりゃいかん。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/45f84914953a6e660bf568b49031c2c2/c6162/before-css.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.243243243243242%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArUlEQVQY04XLywqCQACFYV+joALxUmqY5aWLBVMLc8pFbV2UMwj1/g/wh0FbW3z8m3OMuq5p2xalNFortNaoH6VoGkWj+nXfx/PJ6/3GGA0HrJOIbJVyPvgc8gXRPmO5SwjmAZZlYdt2L8dxME2TMAwxzMmYfJOSr3dUpwUnkZIcczKxJVpGzKYzPM/r5fs+rusSxzGGEIJrVSGl5CLltz9l2Sn/6rZFUXC73fkAn/aNB4tBvJkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"行番号CSS当てる前\"\n        title=\"行番号CSS当てる前\"\n        src=\"/static/45f84914953a6e660bf568b49031c2c2/fcda8/before-css.png\"\n        srcset=\"/static/45f84914953a6e660bf568b49031c2c2/12f09/before-css.png 148w,\n/static/45f84914953a6e660bf568b49031c2c2/e4a3f/before-css.png 295w,\n/static/45f84914953a6e660bf568b49031c2c2/fcda8/before-css.png 590w,\n/static/45f84914953a6e660bf568b49031c2c2/efc66/before-css.png 885w,\n/static/45f84914953a6e660bf568b49031c2c2/c83ae/before-css.png 1180w,\n/static/45f84914953a6e660bf568b49031c2c2/c6162/before-css.png 2166w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>CSSで調整します。今回はグローバルなCSSで当ててますがお好みでどうぞ。</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>global.css</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.line-numbers .line-numbers-rows</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 1rem 0 1rem 0.5rem<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>グローバルCSSはこんな感じで読み込みました。</p>\n\n        <div class=\"gatsby-code-title your-custom-class-name\">\n          <span>gatsby-browser.js</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"./src/styles/global.css\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>完成！なんとなくいい感じになった気がする</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49c3277b9aaf6e59abc19cd4e8d01da8/38116/after-css.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqElEQVQY043LTQqCQACGYY/hKqEGLEX7Qc1irMWUTtAhaiOOXaao9tUNogO+YdvAWjy8m++zyrKkrg8YU1Mb82mjMoaq+k/z3+32PJ8vLLfbIZpMyKYRazkgzSKGMmYYj3Fdl57oIYRo1exs2+Z4PGEFfcEsTVkt5mzViKWakyhJIlPCMMTzPHzfbxUEAY7jcL5csZRSaK0piuJLnjfyn7TeIKXkdn/wBv03ka4I3wAGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"行番号CSS当てた後\"\n        title=\"行番号CSS当てた後\"\n        src=\"/static/49c3277b9aaf6e59abc19cd4e8d01da8/fcda8/after-css.png\"\n        srcset=\"/static/49c3277b9aaf6e59abc19cd4e8d01da8/12f09/after-css.png 148w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/e4a3f/after-css.png 295w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/fcda8/after-css.png 590w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/efc66/after-css.png 885w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/c83ae/after-css.png 1180w,\n/static/49c3277b9aaf6e59abc19cd4e8d01da8/38116/after-css.png 2086w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>参考記事</h2>\n<ul>\n<li><a href=\"https://kikunantoka.com/2019/12/03--install-syntax-highlight/\">GatsbyJSで作っているブログでシンタックスハイライトが適用されるようにした</a></li>\n</ul>\n<h2>PR</h2>\n<ul>\n<li><a href=\"https://github.com/sotaryoutarou/sotaryoutarou.github.io/pull/44\">シンタックスハイライト導入</a></li>\n</ul>","frontmatter":{"title":"【Gatsby】PrismJSの行番号がずれる現象。CSSでなんとかする","date":"August 13, 2021","description":"コードブロックに行番号を表示したら表示崩れを起こしたため、CSSで力ずくで調整する","hero":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACQklEQVQoz4VSy27TUBD1jh2f1A/gH/gGFgiEQEWqVCGxQCpIFaIIiFhAlKiFtikNxc07zsN5OI6dxLHjRx5tEidpk1TdHjTTUCE2LEZ3Zu6ZOWfmXsFbTtFdzuAtpvDoXPnufLLKrfzljHHuYoLu1cUtjrGLCZxLn00IRyM4lXMoWU3kW3UUDA2pWgm/Cllk6hVkNQVqz0bZaiGtVpCpV/kuVs7jRyaB4NE+tgMfsCdGES8XIByl44ikYkgqMhKVIqJSClEpyX6500KuUePzZy7NDYhY0hUmkPQaqD4QDnI95QXFtdihpnK7AcU10ZmNYIwH0PoO6j0b+pmH5nmXcalaGW3/DDXPYizdEUY2G5wX9mMnOM4m8TXyHWJRQq6hcmNSGK8UWBE1SVZl7Hz5jNDxIb6JUV4TqU5UZV4NTWZOziGQGmIixnxTRaVjcKz1XWZ05hNY0yFawz4Ux4R9Mb7JX/pwF1Oewhj1oHY7jBOqThufwkG8fLOFB48fYWvnLS/+MHnKamgUegyKyWKlPCsstDRewYmcR1gU8Wxzg5sK9CWaoy70oQ21b/E+OtMRMxPAGA1YUXs8gD7wOE8xjdfyh7A8HU3lABlNuVFo+j1IkomPm3Hk8iZ61zN+FCIio9FoTDJnleN4NoR3fYVqcheN9TU4r1/A9kcQVKuB0HYBD9cCeL8hwp6PueH/bcif+8nzp9i9dxfm/Tuo0T/UBh0USzZC2xKyOQPu0r8t+qPsX/v7PiqlsRd4hYN361BMHb8BnLr3CnzLKGIAAAAASUVORK5CYII=","aspectRatio":1.9047619047619047,"src":"/static/60b5c99176afb19b5a9c759c1ade628c/f3583/thumbnail.png","srcSet":"/static/60b5c99176afb19b5a9c759c1ade628c/dd5bb/thumbnail.png 320w,\n/static/60b5c99176afb19b5a9c759c1ade628c/f3dec/thumbnail.png 640w,\n/static/60b5c99176afb19b5a9c759c1ade628c/f3583/thumbnail.png 1200w","sizes":"(max-width: 1200px) 100vw, 1200px"}},"publicURL":"/static/60b5c99176afb19b5a9c759c1ade628c/thumbnail.png"},"tags":["Tech","Gatsby","PrismJS"]}}},"pageContext":{"slug":"/gatsby-prismjs-line-number/","previous":{"fields":{"slug":"/shimane-susanoo-magic-20-21/"},"frontmatter":{"title":"今さら島根スサノオマジック20~21シーズンをざっくり振り返る"}},"next":{"fields":{"slug":"/shimane-susanoo-magic-21-22-prospect/"},"frontmatter":{"title":"島根スサノオマジック21-22シーズン展望と注目チーム"}}}},"staticQueryHashes":["1324386404"]}