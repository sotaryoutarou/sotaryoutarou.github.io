{"componentChunkName":"component---src-templates-blog-post-js","path":"/php-date-time-testcase/","result":{"data":{"site":{"siteMetadata":{"title":"ソタのほほん地下貯蔵庫"}},"markdownRemark":{"id":"ede070ca-a666-59c6-bb89-b9b592caf439","excerpt":"これなに DateTimeを扱うメソッドのユニットテストではテストケースとして、月またぎ、年またぎのテストを押さえておきたいところだと思います。 CIを回しているのであれば日付のテストケースは動的に変えていった方がテストの恩恵を受けられると思い、直近の28/29/30/31まである月からテストケースを…","html":"<h2>これなに</h2>\n<p>DateTimeを扱うメソッドのユニットテストではテストケースとして、月またぎ、年またぎのテストを押さえておきたいところだと思います。</p>\n<p>CIを回しているのであれば日付のテストケースは動的に変えていった方がテストの恩恵を受けられると思い、直近の28/29/30/31まである月からテストケースを1日ずつ取得するメソッドを作ってみました。</p>\n<h2>目指すもの</h2>\n<p>言葉では説明難しいので、出したいアウトプットをみてもらった方が早いと思います。</p>\n<p>2021\b年3月18日に実行した場合、こんな感じの配列を返す関数作りたい。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">[</span>\n  <span class=\"token number\">28</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2022-02-18'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">29</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2024-02-18'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">30</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2021-04-18'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">31</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2021-05-18'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>仕様</h2>\n<ul>\n<li>第1引数は大晦日（当年最終日）を含めるか</li>\n<li>第2引数は当月を含めたテストケースを作るか</li>\n</ul>\n<p>を指定します。</p>\n<p>また、30日に実行した場合、２月のように30日が存在しないパターンが出てきます。</p>\n<p>その場合、テストケースにはその月の最終日が入るようにします。</p>\n<p>例）2021\b年3月30日に実行した場合</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token punctuation\">[</span>\n  <span class=\"token number\">28</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2022-02-28'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">29</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2024-02-29'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">30</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2021-04-30'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">31</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2021-05-30'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>コード</h2>\n<p>以下のようなコードを定義すると利用できるようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token function\">getTestMonths</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>で呼び出してください！</p>\n<p>力ずくな箇所も多々ありますが、私のスキルではこれが限界でした。。。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n    <span class=\"token comment\">/**\n     * 月またぎ、年またぎのテストケースを返却する関数\n     *\n     * @param  boolean $hasAddLastDayOfTheYear 当年の大晦日を含めるか\n     * @param  boolean $inclueCurrentMonth     当月をテストケースに含めるか\n     *\n     * @return array   テストケース\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getTestMonths</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$hasAddLastDayOfTheYear</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$inclueCurrentMonth</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">array</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$date</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$testDates</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token number\">28</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token number\">29</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token number\">30</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token number\">31</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$inclueCurrentMonth</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">clone</span> <span class=\"token variable\">$date</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$hasAddLastDayOfTheYear</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token number\">1231</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'-12-31T'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'H:i:s.u'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    \n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">addDays</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$date</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">clone</span> <span class=\"token variable\">$date</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            \n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">/**\n     * 引数で渡ってくるDateTimeインスタンスを翌月まで加算する\n     *\n     * @param DateTime $date\n     *\n     * @return void\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">addDays</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$date</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$now</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$nextMonthDate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">clone</span> <span class=\"token variable\">$date</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$nextMonthDate</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$addDay</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// ２ヶ月後にいってしまったら戻す</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$nextMonthDate</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'n'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'n'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$addDay</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$nextMonthDate</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'-3 days'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 27日以前はこれだけで大丈夫</span>\n        <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$addDay</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// 最終日調整の影響で増えすぎるパターンがあるので少なくするケースに対応</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$now</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n             <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'-'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$now</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token comment\">// 今の日付より小さい かつ 対象月の最終日ではない時は最終日になるように調整</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$now</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>実行結果</h2>\n<p><code class=\"language-text\">DateTime</code> のコンストラクタに渡す値を色々変えてみてアウトプットを見ていきましょう。</p>\n<p><em>2021-01-01</em></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">28</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#4 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-02-01 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">29</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#3 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2024-02-01 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#6 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-04-01 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">31</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#5 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-03-01 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1231</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#2 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-12-31 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>2021-01-31</em></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">28</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#4 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-02-28 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">29</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#3 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2024-02-29 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#6 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-04-30 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">31</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#5 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-03-31 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1231</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#2 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2021-12-31 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>2024-02-29</em></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">28</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#3 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2025-02-28 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">29</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#6 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2028-02-29 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#5 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2024-04-29 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">31</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#4 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2024-03-29 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">[</span><span class=\"token number\">1231</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n  <span class=\"token keyword type-declaration\">object</span><span class=\"token punctuation\">(</span>DateTime<span class=\"token punctuation\">)</span><span class=\"token comment\">#2 (3) {</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"date\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"2024-12-31 00:00:00.000000\"</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone_type\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"timezone\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=></span>\n    <span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string double-quoted-string\">\"UTC\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>ひとこと</h2>\n<p>PHPなので楽に処理できたのもありますが、それでも日付を扱うコードは難しい。。。</p>\n<p>太陽暦の仕様をもうちょい楽にしてほしいなと思ったり思わなかったり</p>\n<h2>おまけ</h2>\n<p>使いやすいようにTrait化したコードも置いておきます。</p>\n<p>クラスにuseして使ってね。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/**\n * PHPUnitでテストケースの日付を取得するtrait\n *\n * $this->getTestMonths() で直近の28~31まである月からテストケースを作成する\n *\n * @author ソタ &lt;sotaryoutarou@gmail.com>\n * @category Test\n */</span>\n<span class=\"token keyword\">trait</span> <span class=\"token class-name\">DateTimeTestCase</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/**\n     * 月またぎ、年またぎのテストケースを返却する関数\n     *\n     * @access public\n     * @param  boolean $hasAddLastDayOfTheYear 当年の大晦日を含めるか\n     * @param  boolean $inclueCurrentMonth     当月をテストケースに含めるか\n     *\n     * @return array   テストケース\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getTestMonths</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$hasAddLastDayOfTheYear</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$inclueCurrentMonth</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">array</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$date</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$testDates</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token number\">28</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token number\">29</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token number\">30</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token number\">31</span> <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$inclueCurrentMonth</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">clone</span> <span class=\"token variable\">$date</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$hasAddLastDayOfTheYear</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token number\">1231</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'-12-31T'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'H:i:s.u'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    \n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token function\">addDays</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$date</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">clone</span> <span class=\"token variable\">$date</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            \n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$testDates</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">/**\n     * 引数で渡ってくるDateTimeインスタンスを翌月まで加算する\n     *\n     * @access private\n     * @param  DateTime $date\n     *\n     * @return void\n     */</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">function</span> <span class=\"token function\">addDays</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$date</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$now</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$nextMonthDate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">clone</span> <span class=\"token variable\">$date</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$nextMonthDate</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$addDay</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// ２ヶ月後にいってしまったら戻す</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$nextMonthDate</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'n'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'n'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$addDay</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token variable\">$nextMonthDate</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'-3 days'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 27日以前はこれだけで大丈夫</span>\n        <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$addDay</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// 最終日調整の影響で増えすぎるパターンがあるので少なくするケースに対応</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$now</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n             <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'-'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$now</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token comment\">// 今の日付より小さい かつ 対象月の最終日ではない時は最終日になるように調整</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$now</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">modify</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'t'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token variable\">$date</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'j'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">' days'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"【PHP】直近の28/29/30/31まである月から1日ずつ取ってきた配列を作りたいんじゃ","date":"March 18, 2021","description":"DateTimeクラスを扱うメソッドのテストケースを作りたいので、直近の28/29/30/31まである月から1日ずつ取ってきた配列を返却するメソッドを作ってみました。","hero":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACTElEQVQoz01SW1PaYBDND+70B3T60OlrZ3Q606lDx3oFRJBrkEAIEEgCCSE3YFBBq5ZWq4ilLWDfTmdXHvqw+Xb3+7J7ztkVll0XTz0Pf/s+2yJw8MfvsE95ul/2XM5TPA8cLHseFpTvuvyOc10Xvz0bgp2Ko7q/AzMRQ3nnM/xcGhcVGYXNEJrxA7QSMbjZJAZSHsZhFKelAr/t5rMIxDTU8C6GZQl+LoWp3YLQSSWgxcJoxqPQYxGcyRJ6xzlE1t6hsreNQMxgpBQ5Zx4d4lwpwcumcFo65oLl3S2cK0X4Yho/OyYEgrtY0aZzKEu4bTZwpSq4qJRwXa+wP9Zq6B1nMW7UcNfS8NBusgxEnyQinynThxJk5IufNnBSzHPhXOgj6tF9aAdhOJkjRmynElx4IIlcZL7SnP795bYhEO+bZh33lo4vVZl1oMtvWu25c9fBd13FvWXg1mgwsoll4Gu9inGjimu1gh8rxIyQRM6HQvCzacjbm6xXOxnH+utXrB/RpYEQKtKahkHDefPyBTIbH5iFGtmDL2ZYNuHOVOGVo7jUJTzaJgtL3agznTPHYnvsmJi5bfbvTJ034d7UOZ5aGqZt/Rnh5CSAYoq4HFiYtHTE3q/hTC6wWclDXgmiTPFVTWHUN0ad83O/w01c1cKj7WFOGtY1A4P+KSbDEaaWgX5BZE1omoRiVC5yTNOmIiQBxbQ2M6eNp6CD9R0Fbze3sAhMCGPfw6IfcCeCTBtPndn+myKvF8W0EfSu5/JUl74Np6ZDLG/jwWnhH0Kd4Xu7Cq+eAAAAAElFTkSuQmCC","aspectRatio":1.9047619047619047,"src":"/static/cc507b4c1ea67751f925664d2f124bb6/f3583/thumbnail.png","srcSet":"/static/cc507b4c1ea67751f925664d2f124bb6/dd5bb/thumbnail.png 320w,\n/static/cc507b4c1ea67751f925664d2f124bb6/f3dec/thumbnail.png 640w,\n/static/cc507b4c1ea67751f925664d2f124bb6/f3583/thumbnail.png 1200w","sizes":"(max-width: 1200px) 100vw, 1200px"}},"publicURL":"/static/cc507b4c1ea67751f925664d2f124bb6/thumbnail.png"},"tags":["Tech","PHP","Date"]}}},"pageContext":{"slug":"/php-date-time-testcase/","previous":{"fields":{"slug":"/introduction/"},"frontmatter":{"title":"Gatsbyでブログ始めました"}},"next":{"fields":{"slug":"/gatsby-prismjs/"},"frontmatter":{"title":"【Gatsby】Prismで良さげなコードハイライトにして行番号表示もいい感じに調整するで"}}}},"staticQueryHashes":["1324386404"]}